{{/* 功能标签导航栏 - 走马灯轮播 + 锚点定位 + 内容切换 + 文字居中 */}}
<div
	class="w-full bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm shadow-sm dark:shadow-gray-800/50 z-50 transition-all duration-300 border-b border-gray-100 dark:border-gray-800 sticky top-0">
	<div class="toggle-label-container w-full  mx-auto py-2 sm:px-6 lg:px-8">
		<div class="flex items-center justify-center gap-0 overflow-hidden" id="tab-carousel-wrapper">
			{{/* 1. Figma插件 - 锚点+内容切换 */}}
			<a href="#tool-content-figmaplugin"
				class="toggle-btn group relative px-6 py-3 font-medium text-sm text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary-400 transition-colors duration-200 inline-block text-center tool-tab"
				data-target="tool-content-figmaplugin" aria-label="Figma插件">
				{{ i18n "toggle.figma" | default "Figma插件" }}
				<sup class="hot-badge ml-1">Hot</sup>
				<span
					class="absolute bottom-0 left-0 w-full h-0.5 bg-primary dark:bg-primary-400 transition-transform origin-left scale-x-0 group-hover:scale-x-100 tool-underline"></span>
			</a>

			{{/* 2. Blender插件 - 锚点+内容切换 */}}
			<a href="#tool-content-blenderplugin"
				class="toggle-btn group relative px-6 py-3 font-medium text-sm text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary-400 transition-colors duration-200 inline-block text-center tool-tab"
				data-target="tool-content-blenderplugin" aria-label="Blender插件">
				{{ i18n "toggle.blender" | default "Blender插件" }}
				<sup class="hot-badge ml-1">Hot</sup>
				<span
					class="absolute bottom-0 left-0 w-full h-0.5 bg-primary dark:bg-primary-400 transition-transform origin-left scale-x-0 group-hover:scale-x-100 tool-underline"></span>
			</a>	

			{{/* 3. 贴图生成 - 锚点+内容切换 */}}
			<a href="#tool-content-texture"
				class="toggle-btn group relative px-6 py-3 font-medium text-sm text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary-400 transition-colors duration-200 inline-block text-center tool-tab"
				data-target="tool-content-texture" aria-label="贴图生成工具">
				{{ i18n "toggle.texture" | default "贴图生成" }}
				<span
					class="absolute bottom-0 left-0 w-full h-0.5 bg-primary dark:bg-primary-400 transition-transform origin-left scale-x-0 group-hover:scale-x-100 tool-underline"></span>
			</a>

			{{/* 4. 颜色主题生成 - 锚点+内容切换 */}}
			<a href="#tool-content-theme"
				class="toggle-btn group relative px-6 py-3 font-medium text-sm text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary-400 transition-colors duration-200 inline-block text-center tool-tab"
				data-target="tool-content-theme" aria-label="颜色主题生成工具">
				{{ i18n "toggle.theme" | default "颜色主题生成" }}
				<span
					class="absolute bottom-0 left-0 w-full h-0.5 bg-primary dark:bg-primary-400 transition-transform origin-left scale-x-0 group-hover:scale-x-100 tool-underline"></span>
			</a>

			{{/* 5. 地图经纬获取 - 锚点+内容切换 */}}
			<a href="#tool-content-map"
				class="toggle-btn group relative px-6 py-3 font-medium text-sm text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary-400 transition-colors duration-200 inline-block text-center tool-tab"
				data-target="tool-content-map" aria-label="地图经纬获取工具">
				{{ i18n "toggle.map" | default "地图经纬获取" }}
				<span
					class="absolute bottom-0 left-0 w-full h-0.5 bg-primary dark:bg-primary-400 transition-transform origin-left scale-x-0 group-hover:scale-x-100 tool-underline"></span>
			</a>
		</div>
	</div>
</div>

<div class="bg-gray-50 dark:bg-gray-800 container mx-auto px-4 transition-all duration-300">
	{{/* 统一ID的内容区域 */}}
	<div class="w-full mx-auto py-8 px-4 sm:px-6 lg:px-8">
		{{/* 1. Figma插件内容（默认隐藏） */}}
		<div id="tool-content-figmaplugin" class="tool-content hidden min-h-[300px] py-4">
			<h3 class="text-2xl font-bold mb-4 text-gray-900 dark:text-white">Figma插件工具</h3>
			<p class="text-gray-600 dark:text-gray-400 mb-6">
				自定义Figma自动化插件，支持批量导出切图、自动生成样式变量、一键转换设计稿为代码，提升UI设计效率80%以上。
			</p>
			<button
				class="bg-primary dark:bg-primary-600 text-white py-2 px-6 rounded-md hover:bg-primary-700 dark:hover:bg-primary-700 transition-colors">
				下载Figma插件
			</button>
		</div>

		{{/* 2. Blender插件内容（默认隐藏） */}}
		<div id="tool-content-blenderplugin" class="tool-content hidden min-h-[300px] py-4">
			<h3 class="text-2xl font-bold mb-4 text-gray-900 dark:text-white">Blender插件工具</h3>
			<p class="text-gray-600 dark:text-gray-400 mb-6">
				适配Blender 4.0+版本的自定义插件，支持一键生成程序化纹理、批量渲染设置、模型轻量化优化，适用于3D场景快速制作。
			</p>
			<button
				class="bg-primary dark:bg-primary-600 text-white py-2 px-6 rounded-md hover:bg-primary-700 dark:hover:bg-primary-700 transition-colors">
				获取Blender插件
			</button>
		</div>

		{{/* 3. 贴图生成内容（默认显示） */}}
		<div id="tool-content-texture" class="tool-content block min-h-[300px] py-4">
			<h3 class="text-2xl font-bold mb-4 text-gray-900 dark:text-white">贴图生成工具</h3>
			<p class="text-gray-600 dark:text-gray-400 mb-6">
				支持自定义分辨率（1080P/4K/8K）、纹理类型（木纹/大理石/渐变/格子），一键生成高清无缝贴图，可直接下载PNG/JPG格式，适用于设计、游戏、3D建模等场景。
			</p>
			<button
				class="bg-primary dark:bg-primary-600 text-white py-2 px-6 rounded-md hover:bg-primary-700 dark:hover:bg-primary-700 transition-colors">
				开始生成贴图
			</button>
		</div>

		{{/* 4. 颜色主题生成内容（默认隐藏） */}}
		<div id="tool-content-theme" class="tool-content hidden min-h-[300px] py-4">
			<h3 class="text-2xl font-bold mb-4 text-gray-900 dark:text-white">颜色主题生成工具</h3>
			<p class="text-gray-600 dark:text-gray-400 mb-6">
				输入主色调（十六进制/RGB），自动生成配套的渐变色、互补色、中性色方案，支持导出CSS变量、JSON配置，适配网页/APP/UI设计场景。
			</p>
			<button
				class="bg-primary dark:bg-primary-600 text-white py-2 px-6 rounded-md hover:bg-primary-700 dark:hover:bg-primary-700 transition-colors">
				生成颜色主题
			</button>
		</div>

		{{/* 5. 地图经纬获取内容（默认隐藏） */}}
		<div id="tool-content-map" class="tool-content hidden min-h-[300px] py-4">
			<h3 class="text-2xl font-bold mb-4 text-gray-900 dark:text-white">地图经纬获取工具</h3>
			<p class="text-gray-600 dark:text-gray-400 mb-6">
				输入地址自动解析经纬度，或点击地图拾取坐标，支持高德/百度/谷歌地图坐标系转换，批量导出Excel/CSV格式，适用于物流、定位、数据分析场景。
			</p>
			<button
				class="bg-primary dark:bg-primary-600 text-white py-2 px-6 rounded-md hover:bg-primary-700 dark:hover:bg-primary-700 transition-colors">
				查询经纬度
			</button>
		</div>
	</div>
</div>

{{/* 样式 + 核心切换+轮播脚本 */}}
<style>
	/* Hot徽章动画样式 */
	.hot-badge {
		display: inline-block;
		padding: 1px 4px;
		border-radius: 2px;
		font-size: 8px;
		font-weight: bold;
		color: white;
		background: linear-gradient(90deg, #ff6b6b, #feca57);
		animation: hotPulse 1.5s infinite alternate, hotBounce 2s infinite ease-in-out;
		box-shadow: 0 1px 3px rgba(0,0,0,0.2);
		transform-origin: center;
	}

	/* 渐变脉冲动画 */
	@keyframes hotPulse {
		0% {
			background: linear-gradient(90deg, #ff6b6b, #feca57);
			opacity: 0.8;
		}
		100% {
			background: linear-gradient(90deg, #ff4757, #ffa502);
			opacity: 1;
		}
	}

	/* 轻微跳动动画 */
	@keyframes hotBounce {
		0%, 100% {
			transform: translateY(0);
		}
		50% {
			transform: translateY(-2px);
		}
	}
	/* 下划线动画 */
	.tool-underline {
		transition: transform 0.25s ease-in-out;
	}

	/* 标签基础样式 */
	.toggle-btn {
		-webkit-tap-highlight-color: transparent;
		cursor: pointer;
		white-space: nowrap;
		position: relative;
		flex-shrink: 0; /* 禁止标签压缩 */
	}

	/* 内容切换动画 */
	.tool-content {
		transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
		opacity: 1;
		transform: translateY(0);
	}

	.tool-content.hidden {
		opacity: 0;
		transform: translateY(10px);
		pointer-events: none;
		display: none !important;
	}

	.tool-content.block {
		display: block !important;
	}

	/* 明暗模式适配 */
	@media (prefers-color-scheme: dark) {
		.toggle-label-container {
			color-scheme: dark;
		}
	}

	/* 激活标签样式 */
	.tool-tab.active {
		color: theme('colors.primary') !important;
		dark:color: theme('colors.primary-400') !important;
		font-weight: 600;
	}
	.tool-tab.active .tool-underline {
		transform: scaleX(1) !important;
	}

	/* 走马灯容器样式 */
	#tab-carousel-wrapper {
		display: flex;
		transition: transform 0.5s ease-in-out;
		will-change: transform; /* 优化性能 */
	}
	#tab-carousel-container {
		overflow: hidden;
		position: relative;
	}

	/* 修复深色模式背景色 */
	.bg-gray-800 {
		background-color: #1f2937;
	}
	.dark .bg-gray-800 {
		background-color: #111827;
	}
</style>

<script>
	// DOM加载完成后执行
	document.addEventListener('DOMContentLoaded', function () {
		// ========== 基础变量定义 ==========
		const toolTabs = document.querySelectorAll('.tool-tab');
		const toolContents = document.querySelectorAll('.tool-content');
		const carouselWrapper = document.getElementById('tab-carousel-wrapper');
		const carouselContainer = document.getElementById('tab-carousel-container');
		const defaultTab = 'tool-content-texture'; // 默认激活标签
		let currentIndex = 0; // 当前激活标签索引
		let carouselTimer = null; // 轮播定时器
		const carouselInterval = 3000; // 轮播间隔（3秒）
		let tabWidth = 0; // 单个标签宽度

		// ========== 核心功能函数 ==========
		// 计算标签宽度（适配响应式）
		function calcTabWidth() {
			if (toolTabs.length > 0) {
				tabWidth = toolTabs[0].offsetWidth; // 获取第一个标签的宽度
			}
		}

		// 切换内容函数
		function switchToolContent(targetId) {
			// 隐藏所有内容
			toolContents.forEach(content => {
				content.classList.add('hidden');
				content.classList.remove('block');
			});
			// 显示目标内容
			const targetContent = document.getElementById(targetId);
			if (targetContent) {
				targetContent.classList.remove('hidden');
				targetContent.classList.add('block');
			}

			// 更新标签激活状态
			toolTabs.forEach((tab, index) => {
				if (tab.dataset.target === targetId) {
					tab.classList.add('active');
					currentIndex = index; // 更新当前索引
					// 滚动走马灯到当前标签位置
					carouselWrapper.style.transform = `translateX(-${currentIndex * tabWidth}px)`;
				} else {
					tab.classList.remove('active');
				}
			});

			// 记录当前激活的标签（刷新页面保留状态）
			localStorage.setItem('activeToolTab', targetId);
		}

		// 走马灯轮播函数
		function carouselPlay() {
			// 计算下一个索引（循环）
			currentIndex = (currentIndex + 1) % toolTabs.length;
			// 获取下一个标签的target
			const nextTarget = toolTabs[currentIndex].dataset.target;
			// 切换内容+滚动标签
			switchToolContent(nextTarget);
		}

		// 启动轮播
		function startCarousel() {
			// 先清除现有定时器
			if (carouselTimer) clearInterval(carouselTimer);
			// 启动新定时器
			carouselTimer = setInterval(carouselPlay, carouselInterval);
		}

		// 停止轮播
		function stopCarousel() {
			if (carouselTimer) {
				clearInterval(carouselTimer);
				carouselTimer = null;
			}
		}

		// ========== 事件绑定 ==========
		// 绑定标签点击事件
		toolTabs.forEach(tab => {
			tab.addEventListener('click', function (e) {
				// 阻止默认锚点跳转（避免页面滚动）
				e.preventDefault();
				const targetId = this.dataset.target;
				// 点击后更新当前索引
				currentIndex = Array.from(toolTabs).findIndex(item => item.dataset.target === targetId);
				// 切换内容
				switchToolContent(targetId);
				// 重启轮播（从当前标签开始）
				startCarousel();
				// 可选：滚动到内容区域顶部
				const targetContent = document.getElementById(targetId);
				if (targetContent) {
					targetContent.scrollIntoView({ behavior: 'smooth' });
				}
			});
		});

		// 鼠标悬停暂停轮播
		carouselContainer.addEventListener('mouseenter', function () {
			stopCarousel();
		});

		// 鼠标移出继续轮播
		carouselContainer.addEventListener('mouseleave', function () {
			startCarousel();
		});

		// 监听窗口大小变化，重新计算标签宽度
		window.addEventListener('resize', function () {
			calcTabWidth();
			// 重新定位到当前标签
			carouselWrapper.style.transform = `translateX(-${currentIndex * tabWidth}px)`;
		});

		// ========== 初始化 ==========
		// 先计算标签宽度
		calcTabWidth();

		// 从URL锚点/本地存储恢复状态
		const urlHash = window.location.hash;
		let activeTab = defaultTab;

		// 1. 优先读取URL锚点
		if (urlHash && document.getElementById(urlHash.slice(1))) {
			activeTab = urlHash.slice(1);
		}
		// 2. 其次读取本地存储
		else if (localStorage.getItem('activeToolTab')) {
			activeTab = localStorage.getItem('activeToolTab');
		}

		// 初始化显示对应内容
		switchToolContent(activeTab);
		// 启动自动轮播
		startCarousel();

		// 监听深色模式切换
		const darkModeMedia = window.matchMedia('(prefers-color-scheme: dark)');
		darkModeMedia.addEventListener('change', () => {
			document.body.classList.toggle('dark', darkModeMedia.matches);
			// 重新计算样式
			calcTabWidth();
		});
	});
</script>